## mako
## File:   templates/mathjax_include.html
##
## Advanced mathjax using 2.0-latest CDN for Dynamic Math
##
## This enables ASCIIMathJAX, and is used by js_textbox


%if mathjax_mode is not Undefined and mathjax_mode == 'wiki':
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [ ['$','$'], ["\\(","\\)"]],
              displayMath: [ ['$$','$$'], ["\\[","\\]"]]}
  });
  HUB = MathJax.Hub
</script>
%else:
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [
        ["\\(","\\)"],
        ['[mathjaxinline]','[/mathjaxinline]']
      ],
      displayMath: [
        ["\\[","\\]"],
        ['[mathjax]','[/mathjax]']
      ]
    }
  });
   MathJax.Hub.signal.Interest(function(message) {
    set_mathjax_display_div_settings(message);
  });
  function set_mathjax_display_div_settings(message) {
    if (message[1].id && message[0] == 'End Math') {
        var status = message[2] == 'Reprocess' ? true : false;
        if (status) {
            try {
                var mathjax_display = message[1].MathJax['preview'].nextSibling;
                if (mathjax_display.className == 'MathJax_Display') {
                    var input_id = mathjax_display.parentElement.id.replace("_preview", "");
                    mathjax_display.setAttribute('aria-label', 'Math output for ' + input_id);
                    mathjax_display.setAttribute('tabindex', '0');
                }

            } catch (err) {

            }
        }
      }
    }
</script>
%endif

<!-- This must appear after all mathjax-config blocks, so it is after the imports from the other templates.
     It can't be run through static.url because MathJax uses crazy url introspection to do lazy loading of
     MathJax extension libraries -->
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-MML-AM_HTMLorMML-full"></script>
